function resetInfos(){$("#chr1").empty(),$("#start1").empty(),$("#end1").empty(),$("#size1").empty(),$("#cov1").empty(),$("#chr2").empty(),$("#start2").empty(),$("#end2").empty(),$("#size2").empty(),$("#cov2").empty(),$("#reads").empty(),$("#circosCommande textarea").val(""),$("#accessContainer").parent().parent().css("display","none"),$("#zoom").val(0),$("#circosCommande").removeClass("bigCircosCommand"),$(this).empty().html("More command options"),$(".optionsCircosCommands").css("display","none"),$(".overlay").css("visibility","hidden")}function fillCommand(){var e=$("input[name='margin']").val(),s=$("input[name='threads']").val();if(console.log(e),isInt(e)&&isInt(s)){$(".errorContainer").css("display","none").empty();var o=parseInt($("#start1").text().split(" ")[0]),n=parseInt($("#end1").text().split(" ")[0]),c=parseInt($("#start2").text().split(" ")[0]),r=parseInt($("#end2").text().split(" ")[0]),t=$("#confCircos").text(),i=$("#accession").text(),a=$("#chr1").text(),l=$("#chr2").text(),p=linksToDraw(),m=" ";$("#cov").prop("checked")&&(m+="--cov y "),$("#scaffolds").prop("checked")&&(m+="--scaff y "),$("#discordant").prop("checked")&&(m+="--discord y ");var d="createUI.py --config "+t+" --name "+i+" --chr "+a+":"+o+":"+n+"-"+l+":"+c+":"+r+" --margin "+e+" "+p+"--versus --thread "+s+m;$("#circosCommande textarea").val(d)}else $(".errorContainer").empty().css("display","block"),isInt(e)||$(".errorContainer").css("display","block").append("<p>Please enter an integer for the margin value.</p>"),isInt(s)||$(".errorContainer").css("display","block").append("<p>Please enter an integer for the threads number value.</p>")}function linksToDraw(){var e="";return $("#zone_ff").prop("checked")&&(e+="--ff y "),$("#zone_fr").prop("checked")&&(e+="--fr y "),$("#zone_rr").prop("checked")&&(e+="--rr y "),$("#zone_ins").prop("checked")&&(e+="--ins y "),$("#zone_del").prop("checked")&&(e+="--delet y "),$("#zone_chr_ff").prop("checked")&&(e+="--chr_ff y "),$("#zone_chr_fr").prop("checked")&&(e+="--chr_fr y "),$("#zone_chr_rf").prop("checked")&&(e+="--chr_rf y "),$("#zone_chr_rr").prop("checked")&&(e+="--chr_rr y "),$("#reads_ff").prop("checked")&&(e+="--read_ff y "),$("#reads_fr").prop("checked")&&(e+="--read_fr y "),$("#reads_rf").prop("checked")&&(e+="--read_rf y "),$("#reads_rr").prop("checked")&&(e+="--read_rr y "),$("#reads_ins").prop("checked")&&(e+="--read_ins y "),$("#reads_del").prop("checked")&&(e+="--read_del y "),$("#reads_chr_ff").prop("checked")&&(e+="--read_chr_ff y "),$("#reads_chr_fr").prop("checked")&&(e+="--read_chr_fr y "),$("#reads_chr_rf").prop("checked")&&(e+="--read_chr_rf y "),$("#reads_chr_rr").prop("checked")&&(e+="--read_chr_rr y "),e}function cleanInfos(){$("#chr1").empty(),$("#start1").empty(),$("#end1").empty(),$("#size1").empty(),$("#cov1").empty(),$("#chr2").empty(),$("#start2").empty(),$("#end2").empty(),$("#size2").empty(),$("#cov2").empty(),$("#reads").empty(),$("#circosCommande textarea").val(""),$("#accessContainer").empty()}function isInt(e){if(isNaN(e))return!1;var s=parseFloat(e);return(0|s)===s}function createMapHTML(e,s){html='<map name="'+s+'">\n';for(var o=0;o<maps[s].length;o++){html+=' <area shape="poly" coords="';for(var n=0;n<maps[s][o][0].length;n++)n>0&&(html+=","),html+=maps[s][o][0][n];html+='" href="'+maps[s][o][1]+'"  title="'+maps[s][o][1]+'" />\n'}html+="</map>\n",$(".mapContent").empty().html(html)}function fillChromosomes(){$("#selectChr2").html("");var e=$("#selectChr1").val();if(1==plist[e].length&&plist[e][0]==e)$("#selectChr2").css("visibility","hidden"),$("#vs").css("visibility","hidden");else for($("#selectChr2").css("visibility","visible"),$("#vs").css("visibility","visible"),j=0;j<plist[e].length;j++)$("#selectChr2").append(plist[e][j]!=e?'<option value="'+plist[e][j]+'">'+plist[e][j]+"</option>":'<option value="none">only draw himself</option>')}function createFilename(){var e=$("#accession").text(),s=$("#selectChr1").val(),o=$("#selectChr2").val();if(null==o||"none"==o)var n=e+"_"+s;else var c=[s,o].sort(),n=e+"_"+c[0]+"_"+c[1];return n}function hideCircosCommand(){$("#circosCommande").removeClass("bigCircosCommand"),$(".moreOptions").empty().html("More command options"),$(".optionsCircosCommands").css("display","none"),$(".overlay").css("visibility","hidden"),$("#cross").css("visibility","hidden")}function showCircosCommand(){$("#circosCommande").addClass("bigCircosCommand"),$(".moreOptions").empty().html("Less command options"),$(".optionsCircosCommands").css("display","block"),$(".overlay").css("visibility","visible"),$("#cross").css("visibility","visible")}$(document).on("click","area",function(){for(var e=$(this).attr("href"),s=e.split("/"),o={},n=0;n<s.length;n++)values=s[n].split("="),o[values[0]]=values[1];if($("#chr1").empty().append(o.chr1),$("#start1").empty().append(o.start1+" bp"),$("#end1").empty().append(o.end1+" bp"),$("#size1").empty().append(o.size1+" bp"),$("#cov1").empty().append(o.cov1),$("#chr2").empty().append(o.chr2),$("#start2").empty().append(o.start2+" bp"),$("#end2").empty().append(o.end2+" bp"),$("#size2").empty().append(o.size2+" bp"),$("#cov2").empty().append(o.cov2),$("#reads").empty().append(o.reads),"-"!=o.misc){var c='<div id="misc">';infosAccessions={};for(var r=o.misc.split("|"),n=0;n<r.length;n++){var t=r[n].split(":");switch(t[1]){case"3":color="green",msg="Zone found.";break;case"2":color="yellow",msg="Zone found with a low score.";break;case"1":color="orange",msg="Only reads found.";break;case"0":color="red",msg="Zone not found.";break;default:color="white",msg=""}c+='<div class="cellAccess '+color+'"><span class="tooltip ">'+t[0]+"</span><span>"+msg+"</span></div>"}c+="</div>"}return $("#accessContainer").parent().parent().css("display","block"),$("#accessContainer").empty().append(c),fillCommand(),!1}),$("#showBtn").on("click",function(){filename=createFilename(),$("#circosImg").attr("src","img/"+filename+".png"),$("#circosImg").attr("usemap","#"+filename),createMapHTML(accession,filename),$("#circosImg").mapster({noHrefIsMask:!1,fillColor:"3D3D3D",fillOpacity:.4,strokeWidth:1,stroke:!0,strokeColor:"3D3D3D",singleSelect:!0,scaleMap:!0}),resetInfos()}),$("#zoom").on("change",function(){var e=$("#zoom").val(),s=document.getElementById("circosImg").naturalWidth,o=900+e*(s-900)/100;$("#circosImg").mapster("resize",o,0)}),$("#circosCommande textarea").on("click",function(){$(this).select()}),$("#cov, #scaffolds, #discordant").on("click",function(){$("#circosCommande textarea").val()&&fillCommand()}),$("#margin, #threads").on("keyup",function(){$("#circosCommande textarea").val()&&fillCommand()}),$(".copyCommand").on("click",function(){copyToClipboard($("#circosCommande textarea").val())}),$(".toggleHide").on("click",function(){$(this).toggleClass("trianglebas").animate(500),$(this).nextAll(".containerBlockUI").slideToggle()}),$("#selectChr1").on("change",function(){fillChromosomes()}),$(".moreOptions").on("click",function(){$("#circosCommande").is(".bigCircosCommand")?hideCircosCommand():showCircosCommand()}),$(".overlay, #cross").on("click",function(){console.log("test"),hideCircosCommand()}),$(".selectZones").on("click",function(){$(".zoneLinks").find("input").prop("checked","checked"),$(this).css("display","none"),$(".unselectZones").css("display","inline"),$("#circosCommande textarea").val()&&fillCommand()}),$(".unselectZones").on("click",function(){$(".zoneLinks").find("input").prop("checked",!1),$(this).css("display","none"),$(".selectZones").css("display","inline"),$("#circosCommande textarea").val()&&fillCommand()}),$(".selectReads").on("click",function(){$(".zoneReads").find("input").prop("checked","checked"),$(this).css("display","none"),$(".unselectReads").css("display","inline"),$("#circosCommande textarea").val()&&fillCommand()}),$(".unselectReads").on("click",function(){$(".zoneReads").find("input").prop("checked",!1),$(this).css("display","none"),$(".selectReads").css("display","inline"),$("#circosCommande textarea").val()&&fillCommand()}),$("input[type=checkbox]").on("change",function(){$("#circosCommande textarea").val()&&fillCommand()}),$(document).ready(function(e){var s=Object.keys(plist).length;for(i=0;i<s;i++)chrom=Object.keys(plist)[i],$("#selectChr1").append(0==i?"<option id="+chrom+' selected="selected">'+chrom+"</option>":"<option id="+chrom+" >"+chrom+"</option>");fillChromosomes(),filename=createFilename(),$("#circosImg").attr("src","img/"+filename+".png"),$("#circosImg").attr("usemap","#"+filename),createMapHTML(accession,filename),$("#circosImg").mapster({noHrefIsMask:!1,fillColor:"3D3D3D",fillOpacity:.4,strokeWidth:1,stroke:!0,strokeColor:"3D3D3D",singleSelect:!0,scaleMap:!0})});